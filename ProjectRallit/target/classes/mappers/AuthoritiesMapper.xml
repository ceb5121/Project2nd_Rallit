<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.human.dao.AuthoritiesDao">
<!-- 권한부여 (회원가입 페이지를 분리하면 권한명 넣어두고 하는 게 낫지 않을까 싶음 -->
<insert id="insertSeeker"> <!-- 유저 권한설정 -->)
insert into Authorities values(#{user_id}, 'role_seeker')
</insert>
<insert id="insertCompany"> <!-- 기업회원 권한설정 -->
insert into Authorities values(#{user_id}, 'role_company')
</insert>

<select id="selectSeeker" resultType="com.human.dto.AuthoritiesDto"> <!-- 일반유저목록 조회 -->
select * from Authorities where authority='role_seeker'
</select>
<select id="selectCompany" resultType="com.human.dto.AuthoritiesDto"><!-- 기업회원목록 조회 -->
select * from Authorities where authority='role_company'
</select>


<delete id="delete"> <!-- 회원탈퇴시 권한 함께 삭제(아이디 중복우려 있어 권한조건 추가함. 이후 프론트 설정따라 변경 가능) -->
delete from Authorities where user_id=#{user_id} and authority=#{authority}
</delete>


</mapper>









